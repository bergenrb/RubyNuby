<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.69">
 <TITLE>En nybegynnerintroduksjon til programmeringsspr&aring;ket Ruby: V&aring;r f&oslash;rste smakebit av Ruby-kode.</TITLE>
 <LINK HREF="pres-3.html" REL=next>
 <LINK HREF="pres-1.html" REL=previous>
 <LINK HREF="pres.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="pres-3.html"><IMG SRC="next.png" ALT="Next"></A>
<A HREF="pres-1.html"><IMG SRC="prev.png" ALT="Previous"></A>
<A HREF="pres.html#toc2"><IMG SRC="toc.png" ALT="Contents"></A>
<HR>
<H2><A NAME="s2">2.</A> <A HREF="pres.html#toc2">V&aring;r f&oslash;rste smakebit av Ruby-kode.</A></H2>

<P>Eksemplene vises med linjenummer. (Disse er <EM>ikke</EM> en del av kildekoden!)<BR>
Det vil si, n&aring;r det st&aring;r  
<PRE>
    12| puts "Hello"
</PRE>
<BR>
er det 
<PRE>
    puts "Hello"
</PRE>
 som er kildekoden.</P>
<P>Kodelinjer er ofte annotert med en kommentar: <CODE><B>#=></B></CODE><BR>
som viser hva resultatet vil bli eller hva som skrives ut. Ett eksempel: <BR>
<PRE>
    5 + 2 #=> 7
</PRE>
</P>


<H2><A NAME="ss2.1">2.1</A> <A HREF="pres.html#toc2.1">Hei verden!</A>
</H2>

<P>Hello World begynner &aring; bli gammel og tynnslitt, s&aring; her har vi en litt mer komplisert variant:</P>
<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/heiverden1.rb">kode/heiverden1.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| <span style="color:green"># Ett klassisk eksempel</span>
  2| <span style="color:blue">class</span> Verden             <span style="color:green"># Definer en klasse...</span>
  3|   <span style="color:blue">def</span> si_hei             <span style="color:green"># med en metode...</span>
  4|     puts <span style="color:#660066">'Hei verden!'</span>   <span style="color:green"># som skriver ut litt tekst.</span>
  5|   <span style="color:blue">end</span>
  6| <span style="color:blue">end</span>
  7| 
  8| verden = Verden.new      <span style="color:green"># Lag en instans av klassen.</span>
  9| verden.si_hei            <span style="color:green"># Kall en metode p&aring; objektet.</span>
</pre>
</td></table>
</P>




<H3>Kj&oslash;re heiverden1.rb</H3>

<P>Det er flere m&aring;ter &aring; kj&oslash;re Ruby-kode p&aring;, bl.a.:
<UL>
<LI> Fra kommandolinjen: <BR><CODE><B>ruby heiverden1.rb</B></CODE>


</LI>
<LI> Fra "Interactive Ruby" (IRB):<BR>
<CODE><B>irb</B><BR>
<EM>irb(main):001:0></EM> <B>load "heiverden1.rb"</B><BR>
<EM>Hei verden!<BR>
true</EM></CODE>


</LI>
<LI> I Windows: Dobbeltklikke p&aring; <CODE>heiverden1.rb</CODE> filen.


</LI>
<LI> I Unix: Gj&oslash;re skriptfilen kj&oslash;rbar ved &aring; legge til <BR>
<CODE>#!/usr/bin/env ruby</CODE><BR>
p&aring; toppen av skriptet, og gj&oslash;re filen kj&oslash;rbar med <CODE>chmod a+x heiverden1.rb</CODE>


</LI>
</UL>
</P>



<H2><A NAME="ss2.2">2.2</A> <A HREF="pres.html#toc2.2">Variabler</A>
</H2>

<P>I Ruby har ikke en variabel noen statisk type. En variabel er bare et navn man forbinder med en referanse til et objekt. 
(Dette er den korte forklaringen p&aring; hva dynamisk typing er.)</P>

<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/variabler1.rb">kode/variabler1.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| x = <span style="color:#660066">'Norge'</span>  <span style="color:green"># Se, jeg er en tekst-streng (String).</span>
  2| x = [1,2,3]  <span style="color:green"># &Oslash;h, jeg mener en Array.</span>
  3| x = 5        <span style="color:green"># Ups, n&aring; er jeg en Fixnum.</span>
  4| 
  5| <span style="color:green"># Tilordninger kan lenkes</span>
  6| a = b = c = d = 5
  7| 
  8| <span style="color:green"># Du trenger ikke ekstra variable for &aring; bytte to verdier</span>
  9| x = 5
 10| y = 3
 11| x, y = y, x  <span style="color:green"># N&aring; er x = 3 og y = 5</span>
 12| 
 13| <span style="color:green"># Denne er kjekk &aring; ha n&aring;r en metode vil returnere flere verdier</span>
 14| a,b,c = [<span style="color:#660066">'a'</span>,<span style="color:#660066">'b'</span>,<span style="color:#660066">'c'</span>]
 15| 
 16| <span style="color:green"># Ruby bruker prefiks for &aring; angi variabel skop</span>
 17| $global_variabel   = <span style="color:#660066">'alle kan se meg!'</span>
 18| lokal_variabel     = <span style="color:#660066">'s&aring;nn som x, y, a, b, c etc.'</span>
 19| @instans_attributt = <span style="color:#660066">'jeg tilh&oslash;rer det gjeldende objekt.'</span>
 20| @@klasse_attributt = <span style="color:#660066">'jeg er felles for mange objekter.'</span>
 21| KONSTANT_VARIABEL  = <span style="color:#660066">'en selvmotsigelse?'</span>
</pre>
</td></table>
</P>

<P>Attributter kalles ogs&aring; instansvariable eller felt.</P>

<P>Enhver variabel som begynner med stor forbokstav er konstant i Ruby. 
Konstant vil si at variabelreferansen er konstant, 
ikke at objektet ikke kan endre tilstand. (&Oslash;nsker du sistnevnte, pr&oslash;v <CODE>freeze</CODE>)</P>



<H2><A NAME="ss2.3">2.3</A> <A HREF="pres.html#toc2.3">Tekststrenger </A>
</H2>

<P>Vi kunne ikke skrive ut "Hei verden!" uten &aring; ha litt tekst.<BR>
I Ruby er tekststrenger instanser av klassen <CODE>String</CODE>.</P>

<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/tekst1.rb">kode/tekst1.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| <span style="color:green"># String objekter kan instansieres</span>
  2| navn = String.new(<span style="color:#660066">&quot;Ruby&quot;</span>) <span style="color:green"># veldig eksplisit, eller</span>
  3| navn = <span style="color:#660066">&quot;Ruby&quot;</span>             <span style="color:green"># implisitt</span>
  4| 
  5| <span style="color:green"># Tekst kan adderes...</span>
  6| fornavn   = <span style="color:#660066">'Ola'</span>
  7| etternavn = <span style="color:#660066">'Nordmann'</span>
  8| fullt_navn = etternavn + <span style="color:#660066">', '</span> + fornavn 
  9| puts fullt_navn <span style="color:green">#=&gt; &quot;Nordmann, Ola&quot;</span>
 10| 
 11| <span style="color:green">#...multipliseres...</span>
 12| <span style="color:#660066">&quot;Ah!&quot;</span> * 2 + <span style="color:#660066">&quot; Tsjo!&quot;</span> <span style="color:green">#=&gt; &quot;Ah!Ah! Tsjo!&quot;</span>
 13| 
 14| <span style="color:green">#...manipuleres...</span>
 15| <span style="color:#660066">&quot;Karakter fire&quot;</span>.sub(<span style="color:#660066">&quot;fire&quot;</span>, <span style="color:#660066">&quot;en&quot;</span>) <span style="color:green">#=&gt;&quot;Karakter en&quot;</span>
 16| <span style="color:#660066">&quot;14.99&quot;</span>.to_f <span style="color:green">#=&gt; 14.99</span>
 17| 
 18| <span style="color:green">#...inspiseres...</span>
 19| <span style="color:#660066">&quot;TEAMWORK&quot;</span>.include?(<span style="color:#660066">&quot;I&quot;</span>)  <span style="color:green">#=&gt; false</span>
 20| <span style="color:#660066">&quot;Kulturuke&quot;</span>.index(<span style="color:#660066">&quot;tur&quot;</span>)  <span style="color:green">#=&gt; 3 </span>
</pre>
</td></table>
</P>
<P>Legg merke til at man kan skrive strenger b&aring;de <CODE>"slik"</CODE> (med kr&aring;ket&aelig;r) og <CODE>'slik'</CODE> (med apostrof). 
Disse to versjonene er ikke bare for syns skyld. </P>


<H3>Mer om String</H3>

<P><CODE>String</CODE>-klassen i Ruby fungerer ikke slik som Java sin String-klasse, hvor man ikke kan endre et strengobjekt.</P>

<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/tekst2.rb">kode/tekst2.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| <span style="color:green"># String objekter kan endres:</span>
  2| navn = <span style="color:#660066">&quot;Ola Nordmann&quot;</span>
  3| 
  4| <span style="color:green"># Kj&oslash;nnsoperasjon?</span>
  5| nyttnavn = navn.sub(<span style="color:#660066">&quot;Ola&quot;</span>, <span style="color:#660066">&quot;Oline&quot;</span>)
  6| 
  7| <span style="color:green"># sub lager ett nytt String objekt.</span>
  8| puts nyttnavn <span style="color:green">#=&gt; &quot;Oline Nordmann&quot;</span>
  9| puts navn     <span style="color:green">#=&gt; &quot;Ola Nordmann&quot;</span>
 10| 
 11| <span style="color:green"># sub! (sub-bang) endrer selve streng objektet</span>
 12| nyttnavn = navn.sub!(<span style="color:#660066">&quot;Ola&quot;</span>, <span style="color:#660066">&quot;Oline&quot;</span>)
 13| puts nyttnavn <span style="color:green">#=&gt; &quot;Oline Nordmann&quot;</span>
 14| puts navn     <span style="color:green">#=&gt; &quot;Oline Nordmann&quot;</span>
</pre>
</td></table>
</P>

<P> Legg merke til at <CODE>sub</CODE> generer et helt nytt <CODE>String</CODE>-objekt, mens <CODE>sub!</CODE> endrer det faktiske objektet.<BR>
Metoder som slutter med utropstegn kalles <B>"bang"</B>, <B>"mutator"</B> eller <B>"destruktive"</B> metoder, da de som oftest endrer objektet.  <BR>
 
Ruby bruker denne konvensjonen for navngivelse p&aring; mange metoder, men er ikke p&aring;krevd.</P>




<H3>Skrive ut tekst</H3>

<P> Det er mer enn en m&aring;te &aring; fl&aring; en katt p&aring;, og der er ogs&aring; mer enn en m&aring;te &aring; skrive ut tekst i Ruby. </P>

<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/utput1.rb">kode/utput1.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| <span style="color:green"># Tekst kan skrives ut</span>
  2| navn = <span style="color:#660066">'Finn'</span>
  3| puts <span style="color:#660066">'Jeg heter '</span> + navn
  4| 
  5| <span style="color:green"># Liker du ikke puts?</span>
  6| print <span style="color:#660066">&quot;Jeg heter &quot;</span> + navn + <span style="color:#660066">&quot;.\n&quot;</span>
  7| 
  8| <span style="color:green"># Liker du C?</span>
  9| printf <span style="color:#660066">&quot;Jeg heter %s!\n&quot;</span>, navn
 10| 
 11| <span style="color:green"># Forelska i C++?</span>
 12| STDOUT &lt;&lt; <span style="color:#660066">&quot;Ikke Bjarne... &quot;</span> &lt;&lt;
 13|   <span style="color:#660066">&quot;Ikke Jan-Thomas... &quot;</span> &lt;&lt;
 14|   <span style="color:#660066">&quot;Jeg heter &quot;</span> &lt;&lt; navn &lt;&lt; <span style="color:#660066">&quot;!!!\n&quot;</span>
 15| 
 16| <span style="color:green"># Tekst-streng interpolering.</span>
 17| puts <span style="color:#660066">&quot;Jeg heter fremdeles #{navn}&quot;</span>
 18| puts <span style="color:#660066">&quot;Jeg blir #{Time.now.year-1978} &aring;r i &aring;r&quot;</span>
</pre>
</td></table>
</P>

<P> Her ser vi hvorfor vi b&aring;de bruker "kr&aring;ket&aelig;r" og 'apostrof' for &aring; angi tekststrenger. Med kr&aring;ket&aelig;r kan vi escape tegn (slik som <CODE><B>\n</B></CODE> som betyr ny linje), og kj&oslash;re Ruby uttrykk inne i tekststrengen. </P>



<H2><A NAME="ss2.4">2.4</A> <A HREF="pres.html#toc2.4">Tall.</A>
</H2>

<P>Selv om tall ogs&aring; er objekter i Ruby, oppf&oslash;rer de seg normalt, og du m&aring; ikke vri hjernen din rundt s&aelig;r syntaks.</P>

<P>
<table >
      <tr style="background-color:#F0D0D0" ><td>
<div style="margin-top:1em;font-family:sans-serif"><A HREF="kode/tall1.rb">kode/tall1.rb</A></div>
<tr style="background-color:#FFF0F0"><td>
<pre style="margin-top:0">
  1| <span style="color:green"># Heltall</span>
  2| a = 3
  3| b = 2
  4| c = a + b    <span style="color:green">#=&gt; 5</span>
  5| d = c / b    <span style="color:green">#=&gt; 2</span>
  6| 
  7| <span style="color:green"># Flyttall</span>
  8| f = c.to_f / b <span style="color:green">#=&gt; 2.5</span>
  9| 
 10| <span style="color:green"># Tall er ogs&aring; objekter</span>
 11| puts <span style="color:#660066">&quot;tre og to er &quot;</span> + c.to_s
 12| -25.abs     <span style="color:green">#=&gt; 25</span>
 13| a.zero?     <span style="color:green">#=&gt; false</span>
 14| 0.zero?     <span style="color:green">#=&gt; true</span>
 15| a.next      <span style="color:green">#=&gt; 4 </span>
</pre>
</td></table>
</P>

<P>Ruby har flere tallklasser:
<UL>
<LI> <CODE>Fixnum</CODE> - begrenset heltall</LI>
<LI> <CODE>Bignum</CODE> - ubegrenset heltall (forutsatt uendelig minne ;-)</LI>
<LI> <CODE>Float</CODE>  - flyttall med begrenset presisjon</LI>
</UL>

Men du trenger ikke &aring; tenke s&aring; mye p&aring; dem. Dersom du gj&oslash;r noe med <CODE>Fixnum</CODE> som blir for stort, f&aring;r du automatisk en <CODE>Bignum</CODE> ut. Du slipper &aring; tenke p&aring; overflyt. Flyttall er derimot like un&oslash;yaktige som i de fleste spr&aring;k og avrundingsproblematikk slipper du ikke unna. <BR>
For &aring; lagre br&oslash;ker, kan du bruke <CODE>Rational</CODE>-klassen. ( <CODE>require 'rational'</CODE> )</P>
<P>
<DL>
<DT><B>to_s</B><DD>
<P>to string - lag en tekstlig representasjon av objektet, ikke ulikt Java sin <CODE>toString()</CODE>.</P>
</DL>
</P>



<HR>
<A HREF="pres-3.html"><IMG SRC="next.png" ALT="Next"></A>
<A HREF="pres-1.html"><IMG SRC="prev.png" ALT="Previous"></A>
<A HREF="pres.html#toc2"><IMG SRC="toc.png" ALT="Contents"></A>
</BODY>
</HTML>
